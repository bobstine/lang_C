/*	Debugging X-Lisp Code Resources for the Poisson project.	*/#include <stdlib.h>#include <stdio.h>/*  #include "memDebug.h"	*/#include "debug.h"#include "xlsx.h"#include "random.h"#define		LENGTH		   8#define		NCELLS		  50#define 	NUNIFORM	 500#define		RANDBASE	1024#define		MAXCDF		 100/*	-----  Static data which is passed to the C code resource routines.  ----- */	static long		code = 0;		static long 	arrive[LENGTH];	static long		total[LENGTH];	static long 	nPeriod = LENGTH-1;		static long		alloc[NCELLS];	static long		nextAlloc[NCELLS];	static double   condProb[NCELLS];	static long		nCells = NCELLS;		static double   arriveCDF[MAXCDF];	static double   uniform[NUNIFORM];	static double   prob[LENGTH] ;	static double   lambda = 4.0;	/* ----------------------------------------------------------------------------- */void FillStaticData(void);void AllocParms (long n, XLSXblock *parms);void SetupParms (XLSXblock *parms);extern void poissonMain	(XLSXblock *parms);void FillStaticData(){	int i;	double div = NCELLS, randBase = RANDBASE;		code = 4;				/* select the simulation of steps	*/		for (i=0; i<LENGTH; ++i)	{	arrive[i] =  4;		total[i]  = 20;	}	for (i=0; i<NCELLS; ++i)	{	alloc[i] = 0;		nextAlloc[i] = 0;		condProb[i] = 0.8;	}		arriveCDF[0] = 0.0183156;	for (i=1; i < MAXCDF; ++i)		arriveCDF[i] = arriveCDF[i-1] * lambda / (double) i;	for (i=1; i < MAXCDF; ++i)		arriveCDF[i] += arriveCDF[i-1];					total[0] = 30;		/* y[0] */			arrive[0] = 15;	total[1] = 30;							arrive[1] = 15;	total[2] = 30;							arrive[2] = 15;	total[3] = 30;							arrive[3] = 15;	total[4] = 30;							arrive[4] = 15;	total[5] = 30;							arrive[5] = 15;	total[6] = 30;							arrive[6] = 15;								total[7] = 30;									alloc[0] = 20;		/* allocation of total[0] items */	alloc[1] = 5;	alloc[2] = 5;		prob[0] = 0.024772;		for (i = 0; i < NUNIFORM; ++i)		uniform[i] = (double) (rand() % RANDBASE)/randBase;	}void AllocParms (n, parms)long n;XLSXblock *parms;{	parms->argc = n;	parms->argv = malloc(n * sizeof(char *));}void SetupParms (parms)XLSXblock *parms;{	parms->argv[ 0] = (char *) &code;	parms->argv[ 1] = (char *)  total;	parms->argv[ 2] = (char *)  arrive;	parms->argv[ 3] = (char *) &nPeriod;	parms->argv[ 4] = (char *)  alloc;	parms->argv[ 5] = (char *)  nextAlloc;	parms->argv[ 6] = (char *)  condProb;	parms->argv[ 7] = (char *) &nCells;	parms->argv[ 8] = (char *)  arriveCDF;	parms->argv[ 9] = (char *)  uniform;	parms->argv[10] = (char *) &prob;}main(){	XLSXblock parms;	double uniform[20];	int i;	/*	InitGenerator (100,100);	FillUniformVector(uniform, 20);	PrintDoubleVec(uniform, 20, "Uniform vector");	*/		FillStaticData();	AllocParms (11, &parms);	SetupParms (&parms);		poissonMain (&parms);	printf ("Final prob is %lf", prob);	}