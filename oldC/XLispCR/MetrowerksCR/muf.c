/*********************************************   muf.c         Recreated for demo of linking to S   in Stat 540.         21 Feb 95   *********************************************//*  Prototypes  */float logistic (float x);void muf(float *x, long *nX, float *periods, long *nPeriods, float *scale);void main (void);void InitDataAsTime(float *data);#include <stdlib.h>#include <stdio.h>#include <math.h>float logistic (float x){	return(1.0 / (1.0 + exp(-x)));}void muf(float *x, long *nX, float *periods, long *nPeriods, float *scale){	int period,t, offset;	float delta, level, upperLimit, jumpAt;		period = 1;	offset = 0;		level = periods[0];	delta = periods[3] - level;	upperLimit = (periods[3+1] + periods[3+2])/2.0;	jumpAt = periods[2];		for(t=0; t<*nX; ++t)	{	if (x[t] > upperLimit)  			/* move to next period */		{	period = period + 1;			if (period == *nPeriods)		/* in last segment of last period */				upperLimit = 1.01;			else			{	offset = offset + 3;				level = periods[offset];				delta = periods[offset+3] - level;				upperLimit = (periods[offset+3+1]+periods[offset+3+2])/2.0;				jumpAt = periods[offset + 2];			}		}		x[t] = level + delta * logistic( (x[t]-jumpAt) / *scale);	}}	/* ---------------------------------------------------------------- */		const len = 101;void main(void){	long  length = len;	long  nPeriods = 3;	float data[len];	float activity[9] = {3.0,0.0,0.3,  2.0,0.3,0.6,  -3.0,0.6,1.0};	float scale = 0.1;		int i;	InitDataAsTime(data);	muf(data, &length, activity, &nPeriods, &scale);		for (i=0; i<len; ++i)		printf(" %2d:  %f\n", i, data[i]);		}	void InitDataAsTime(float *data){	int i;	float fLen, num;		fLen = (float) len;		for(i=0; i<len; ++i)	{	num = (float) i;		data[i] = num / fLen;	}}