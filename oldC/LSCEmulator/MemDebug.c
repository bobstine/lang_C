/*	17 Jul 89 ... Created from old array def.*/#include "InOut.h"/*	_____ Debugging memory chain to check allocations _____	*/static int newList = 1;  /* 1 = TRUE */static int totalBytes = 0;struct MEMREC {	struct MEMREC *next;	char *ptr;	int nBytes;	} MEMREC;struct MEMREC *headPtr, last;/*  ______________  Local Functions  ______________  */void PrintMemChain(){	struct MEMREC *mp;	int i=0;		mp = headPtr;	fprintf (stderr,"\nDump of current memory list totaling %d bytes.\n", totalBytes);	while (mp)	{	fprintf (stderr,"Record #%3d with %4d bytes @location %ld\n", ++i, mp->nBytes, mp->ptr);		mp = mp->next;	}	Wait();}void CheckMemPointer (ptr, str)char *ptr, *str;{	struct MEMREC *mp;	int i=0;		fprintf (stderr,str);	mp = headPtr;	while (mp)	{	++i;		if (mp->ptr ==  ptr)		{	 fprintf (stderr," --- pointer match found in record %d with %d bytes./\n", i, mp->nBytes);			return;		}		mp = mp->next;	}	fprintf (stderr," --- match to pointer NOT found...\n");	Wait();}char *MyAlloc(nBytes)int nBytes;{	struct MEMREC *new;	char *ptr;		if (newList)	/* Initialize the memory list */	{	newList = 0;		headPtr = &last;		last.next = NULL;		last.nBytes = -1;		last.ptr = NULL;	}	new = (struct MEMREC *) malloc(sizeof(struct MEMREC));	ptr = malloc (nBytes);	new->next = headPtr;	new->nBytes = nBytes;	new->ptr = ptr;	headPtr = new;	totalBytes += nBytes;	return (ptr);}int MyFree (ptr)char *ptr;{	struct MEMREC *mp, *nextRec;		if (ptr == headPtr->ptr)		/* check for first */	{	totalBytes -= headPtr->nBytes;		free (headPtr->ptr);		nextRec = headPtr->next;		free ( (char *) headPtr);		headPtr = nextRec;		return (1);	}	mp = headPtr;	while (mp->next)	{	if (ptr == mp->next->ptr)		/* find match */		{	totalBytes -= mp->next->nBytes;			free (mp->next->ptr);			nextRec = mp->next->next;			free ( (char *)mp->next );			mp->next = nextRec;			return (1);		}		mp = mp->next;	}	fprintf (stderr,"Record NOT found; suggest terminating if should be!\n");	Wait();	return (-1);}			