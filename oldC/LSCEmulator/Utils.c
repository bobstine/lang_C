/*			Utils.c							*//*							 7 Oct 87		*//*	 5 Sep 89 ... Added ClearErrorCodes	*/#include "Globals.h"#include "Utils.h"int IsNearZero (x)double x;{			return ( (x < EPSILON) && ((-x) < EPSILON) );}int IsNegative (x)double x;{			return (x < EPSILON);}double PolyValue(coef, maxPower, x)double *coef;int maxPower;double x;{ 	int i;	double value;	coef += maxPower;		/* start with coef of highest power */	value = *coef--;		/* get last and decrement			*/	for (i=maxPower-1; i>=0; --i, --coef)		value = *coef + x * value;	return (value);}/*  ___________________________  Error Processing  ___________________  */#define ERRORSIZE  5#define MSGLENGTH 35typedef struct {		 int errorCode;		 char errorMsg[MSGLENGTH];		} Error;static Error errors[ERRORSIZE];static errorCount = 0;			/* index for NEXT error */void ClearErrorCodes(){	errorCount = 0;}void SetErrorCode(errorCode, msg)int errorCode;char *msg;{	char *buffer;	int count=MSGLENGTH;	int i;		if (errorCount < ERRORSIZE)	{	errors[errorCount].errorCode = errorCode;		buffer = errors[errorCount].errorMsg;		do 			*buffer++  = *msg++;		while ((msg NE NULL) AND --count);		errors[errorCount].errorMsg[MSGLENGTH-(count+1)] = 0;		++errorCount;	}}int ErrorHasOccured (){	if (errorCount)		return(errors[errorCount-1].errorCode);	else		return (FALSE);}int ErrorCode(itsMsg)char **itsMsg;{	if (errorCount)	{	--errorCount;		*itsMsg = errors[errorCount].errorMsg;		return(errors[errorCount].errorCode);	}	else	{	*itsMsg = NULL;		return (0);	}}